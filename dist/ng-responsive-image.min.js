/**!
 * ng-responsive-image - v0.1.10 - 2017-03-28
 *
 * Copyright (c) 2017 [object Object]
 * Distributed under the MIT licence
 */
!function(a){"use strict";function b(a,b){return function(a,c,d,e){if(!(a&&c&&d&&e))return void console.error(new Error("r-src must be provided an src object, a width and a ratio."));var f=Object.keys(a).map(function(b){var c=b.match(/^url_(\d+)x(\d+)$/);if(!c)return null;var d=c[1],e=c[2],f=d/e;return d&&e&&f?[f,d,e,a[b]]:void console.error(new Error("Unexpected image object. rSrc needs keys of the form url_0x0 with urls as values"))}).filter(function(a){return!!a}).filter(function(a){return+a[2]>=d*b}).filter(function(a){return+a[1]>=c*b}).sort(function(a,b){return a[0]-b[0]}).filter(function(a,b,c){return c.filter(function(a){return a[0]===e})[0]?a[0]===e:!0}).reduceRight(function(a,b){return a.length>0&&+b[0]<a[0][0]?a:a.concat([b])},[]).reduce(function(a,b){return a?+b[1]<+a[1]?b:a:b},!1);if(!f){var g=Object.keys(a).map(function(a){return a.match(/^url_(\d+)x(\d+)$/)}).reduce(function(a,b){return!b||!b[1]||a&&a[1]>b[1]?a:b});return g?(console.warn("No image for "+c+"px/"+b+"/"+e+". Falling back to largest."),a[g[0]]):void console.error(new Error("The image object does not contain any proper image properties."))}return f[3]}}a.factory("matchImage",b),b.$inject=["$window","RSrcPixelDensity"]}(angular.module("ng-responsive-image.matcher",["ng-responsive-image.pixel-density"])),function(a){"use strict";function b(){var a=window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (min-resolution: 3dppx), only screen and (min-resolution: 288dpi)").matches?3:window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-resolution: 1.5dppx), only screen and (min-resolution: 144dpi)").matches?2:1;this.provideCustom=function(b){if("number"==typeof b)a=b;else{if("function"!=typeof b)throw new Error("RSrcPixelDensity.provideCustom must be passed either a pixel density as a number or a function to calculate it.");a=b()}},this.$get=function(){return a}}a.provider("RSrcPixelDensity",b)}(angular.module("ng-responsive-image.pixel-density",[])),function(a){"use strict";function b(a,b){return{restrict:"A",scope:{src:"=rSrc",image_is_loaded:"=?imageIsLoaded"},link:function(c,d,e){function f(){if(n||!c.src||i(c.src)||!c.src.$promise&&!c.src.then)if(n||i(c.src)){if(i(c.src))n&&n(),g();else if(void 0!==c.src){var a=new Error("Image object does not contain any appropriate url_ properties");return o.reject(a),void console.error(a)}}else n=c.$watch("src",f);else(c.src.$promise||c.src).then(function(){if(!i(c.src)){var a=new Error("Image object does not contain any appropriate url_ properties");return o.reject(a),void console.error(a)}g()})}function g(){n=c.$watch("src."+i(c.src),function a(b,d){d&&!b&&(n(),n=c.$watch("src."+i(c.src),a)),h()})}function h(){var a=b(c.src,k,l,m),e=document.createElement("img");e.src=a,e.onload=function(){return e.naturalWidth+e.naturalHeight===0?e.onerror():(o.resolve(),void(d.attr("background")?d.css("background-image","url("+a+")"):d.attr("src",a)))},e.onerror=function(){o.reject("Failed to load an image.")}}function i(a){for(var b in a)if(0===b.indexOf("url_"))return b}function j(){return(k=+e.width||d[0].clientWidth||e.height*e.ratio||d[0].clientHeight*e.ratio)?(l=+e.height||e.width/e.ratio||d[0].clientHeight||d[0].clientWidth/e.ratio)?(m=+e.ratio||(e.height?k/e.height:k/d[0].clientHeight),m&&m!==1/0?void 0:void console.error(new Error("rSrc needs either a height, a ratio, or an element with a CSS applied height"))):void console.error(new Error("rSrc needs either a height, a ratio or an element with a CSS applied height")):void console.error(new Error("rSrc needs either a width or an element with a CSS applied width"))}var k,l,m,n,o;o=a.defer(),c.image_is_loaded=o.promise,j(),f()}}}a.directive("rSrc",b),b.$inject=["$q","matchImage"]}(angular.module("ng-responsive-image",["ng-responsive-image.matcher"]));